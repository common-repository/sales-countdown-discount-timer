jQuery(document).ready((function(){let{countdown_format:e,message:t,defaultMessage:o,loop_countdown_toggle:n,separator_toggle:a,time_separator:r,end_time:s,start_time:c,campaign_title:u,display_on_product_page:i}=countdownData;function l(t,n){const a=t;if(jQuery(a).length>0){var r=JSON.parse(jQuery(t).attr("data-metsales-schedules"))||{};if(r.length>0){var s=jQuery('[name^="attribute_"]');let i={},l=0,d=[];function c(e){let t={};for(let o in e)e.hasOwnProperty(o)&&(t[o]="string"==typeof e[o]?e[o].toLowerCase():e[o]);return t}r.forEach(((e,t)=>{d[e.v_key]=e.attribute_values,l=Object.entries(d).length})),s.each((function(e,t){t.addEventListener("change",(function(){let e=this.name.split("attribute_")[1],t=this.value;i[e]=t,Object.entries(i).length>0&&(is_matched=function(e,t){t.forEach(((t,o)=>{let n=c(t),a=c(e);if(s=a,i=n,Object.keys(s).every((e=>i.hasOwnProperty(e)&&s[e]===i[e])))u(r[o]);else var s,i}))}(i,d))}))}))}else u(r);function u(t){var o,n;".msc-category-single-product"==a||".met-sales-countdown-campaign-shortcode"==a||".met-sales-countdown-upcoming-product"==a?(o=new Date(t.sales_price_date_from),n=new Date(t.sales_price_date_to)):(o=m(t.sales_price_date_from),n=m(t.sales_price_date_to));let r=new Date(Date.now());isNaN(o)||isNaN(n)||(r>=o&&r<=n?(jQuery(a).show(),Countdown.init(o,n,"",e||"tillMonth")):jQuery(a).hide())}n?jQuery(".met-sale-countdown-header-text").text(n):jQuery(".met-sale-countdown-header-text").text(o),"yes"==r?.upcoming_product&&(n=r?.upcoming_message?r?.upcoming_message:"Upcoming")}}l(".met-sales-countdown-campaign-shortcode",u),l(".met-sales-countdown-upcoming-product",u),l(".msc-category-single-product",u),l(".msc-single-product-campaign",u),l(".msc-single-product",t);let d=jQuery(".met-sales-countdown-time-separator");function p(t){jQuery(t).length>0&&jQuery(t).each((function(o,n){let a,r,s=JSON.parse(jQuery(n).attr("data-loop-product-schedules")),{sales_price_date_from:c,sales_price_date_to:u}=s,i=new Date(Date.now());".msc-category-loop-product"==t?(a=new Date(c),r=new Date(u)):(a=m(c),r=m(u)),i>=a&&i<=r?(jQuery(n).show(),Countdown.init(a,r,n,e||"tillMonth")):jQuery(n).remove()}))}function m(e){return new Date(1e3*e)}d.length>0&&"no"!=r&&d.each((function(e,t){jQuery(this).text(r)})),p(".msc-category-loop-product"),p(".msc-loop-product")}));