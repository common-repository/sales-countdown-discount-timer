jQuery(document).ready((function(e){let{countdown_format:t,message:o,defaultMessage:n,loop_countdown_toggle:l,time_separator:a,api_url:s,ajaxurl:u,nonce:i,campaign_category:r}=countdownData;jQuery.ajax({url:s+"categories",type:"get",dataType:"json",success:function(e){let{message:t,result:o,status:n}=e,l=jQuery(".msc-campaign-category-list"),a="";for(let[e,t]of Object.entries(o))a+=`<option value="${e}">${t}</option>`;l.html(a),r.length>0&&jQuery.each(r,(function(e,t){jQuery(".msc-campaign-category-list option[value='"+t+"']").prop("selected",!0)}))}}),jQuery("#msc-settings-accordion").show().accordion({collapsible:!0}).show(),jQuery(".msc-campaign-category-list").select2();let c,h=y(t||"tillMonth");function d(e=3,t="tillMonth"){const o=new Date;let n=new Date(o);if("tillMonth"===t)n.setMonth(n.getMonth()+e),n.setDate(n.getDate()+1);else if("tillDay"===t)n.setDate(n.getDate()+e);else if("tillHour"===t)n.setHours(n.getHours()+e);else{if("tillMin"!==t)throw new Error("Invalid time unit. Supported units: months, days, hours, minutes.");n.setMinutes(n.getMinutes()+e)}return n}if(t&&(h=y(t)),Countdown.init(new Date(Date.now()),h,"","tillMonth"),jQuery(".met-sale-countdown-msg").on("input",(function(){let e=jQuery(this).val();jQuery(".met-sale-countdown-header-text").text(e)})),o)jQuery(".met-sale-countdown-header-text").text(o);else{let e=jQuery(".met-sale-countdown-msg").val();jQuery(".met-sale-countdown-header-text").text(e)}function y(e="tillMonth"){return"tillMonth"==e?d(2.1,"tillMonth"):"tillDay"==e?d(7,"tillDay"):"tillHour"==e?d(18,"tillHour"):"tillMin"==e?d(89,"tillMin"):"tillSec"==e?d(100,"tillSec"):void 0}t&&(clearInterval(c),Countdown.init(new Date(Date.now()),h,"",t)),jQuery(".met-sale-countdown-format").on("input",(function(){let e=jQuery(this).val();h=y(e),clearInterval(c),Countdown.init(new Date(Date.now()),h,"",e)}));let w=jQuery("#separatorSwitch"),m=jQuery(".met-sale-countdown-seperator-settings"),p=jQuery(".met-sales-countdown-time-separator");w&&w.on("change",(function(){w.prop("checked")?(m.show(),p.each(((e,t)=>{t?jQuery(t).text(a):jQuery(t).text(":")}))):(m.hide(),p.each(((e,t)=>{jQuery(t).text("")})))})),a&&jQuery(".met-sale-countdown-time-separator").length>0&&jQuery(".met-sale-countdown-time-separator").val(a),w&&jQuery(".met-sale-countdown-time-separator").length>0&&jQuery(".met-sale-countdown-time-separator").on("input",(function(){let e=jQuery(this).val();a=e,""!==e&&"no"!==e?p.each(((e,t)=>{jQuery(t).text(a)})):p.each(((e,t)=>{jQuery(t).text("")})),h=y(t||"tillMonth"),Countdown.init(new Date(Date.now()),h,"",t||"tillMonth")}));let j=jQuery(".met-sales-loop-product-switch"),Q=jQuery(".met-sales-loop-product-time-settings");j&&j.on("change",(function(){j.prop("checked")?Q.show():Q.hide()})),"1"==l?Q.show():""==l&&Q.hide(),"no"!=a&&p.each(((e,t)=>{jQuery(t).text(a)})),jQuery(".met-sales-single-product-switch").on("change",(function(){jQuery(this).prop("checked")?jQuery(".met-sales-countdown-single-product-show").show():jQuery(".met-sales-countdown-single-product-show").hide()}))}));